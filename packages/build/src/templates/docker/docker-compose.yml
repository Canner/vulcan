version: '3.8'

services:
  engine:
    image: ghcr.io/canner/accio:latest
    platform: ${PLATFORM}
    ports:
      - 8080:8080
      - 7432:7432
    volumes:
      - ${GRAPHMDL_PATH}:/usr/src/app/etc/acciomdl.json
      - ${CONFIG_PATH}:/usr/src/app/etc/config.properties
      - ${LAUNCH_CLI_PATH}:/usr/src/app/launch-cli.sh
    networks:
      - vulcansql-net

  admin-ui:
    image: ghcr.io/canner/admin-ui:latest
    platform: ${PLATFORM}
    ports:
      - 4000:3000
    volumes:
      - ${GRAPHMDL_PATH}:/usr/src/app/accio.json
    environment:
      - JSON_PATH=/usr/src/app/accio.json
      - PG_DATABASE=tpch_tiny
      - PG_PORT=7432
      - PG_USERNAME=canner-cml
      - PG_PASSWORD=""

networks:
  vulcansql-net:
    external: true

